(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery-ui","d3","JSRootPainter","JSRootPainter.hierarchy","JSRootPainter.jquery"],a)}else{if(typeof jQuery=="undefined"){throw new Error("jQuery not defined","JSRootPainter.openui5.js")}if(typeof jQuery.ui=="undefined"){throw new Error("jQuery-ui not defined","JSRootPainter.openui5.js")}if(typeof d3!="object"){throw new Error("This extension requires d3.v3.js","JSRootPainter.openui5.js")}if(typeof JSROOT=="undefined"){throw new Error("JSROOT is not defined","JSRootPainter.openui5.js")}if(typeof JSROOT.Painter!="object"){throw new Error("JSROOT.Painter not defined","JSRootPainter.openui5.js")}a(jQuery,jQuery.ui,d3,JSROOT)}}(function(e,f,d,a){a.sources.push("openui5");var c=a.complete_script_load;delete a.complete_script_load;a.completeUI5Loading=function(){a.sap=sap;a.CallBack(c);c=null};console.log("start ui5 loading ",typeof jQuery);var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("id","sap-ui-bootstrap");b.setAttribute("src","https://openui5.hana.ondemand.com/resources/sap-ui-core-nojQuery.js");b.setAttribute("data-sap-ui-libs","sap.m");b.setAttribute("data-sap-ui-theme","sap_belize");b.setAttribute("data-sap-ui-compatVersion","edge");b.setAttribute("data-sap-ui-preload","async");b.setAttribute("data-sap-ui-resourceroots",'{ "sap.ui.jsroot": "'+a.source_dir+'openui5/" }');b.setAttribute("data-sap-ui-evt-oninit","JSROOT.completeUI5Loading()");document.getElementsByTagName("head")[0].appendChild(b);a.Painter.createMenuNew=function(h,i){var j={painter:h,element:null,cnt:1,stack:[],items:[],separ:false};function g(n,o,m,l){var k=o.getSubmenu();n.write("<li ");var p="sapUiMnuItm";if(l.iItemNo==1){p+=" sapUiMnuItmFirst"}else{if(l.iItemNo==l.iTotalItems){p+=" sapUiMnuItmLast"}}if(!m.checkEnabled(o)){p+=" sapUiMnuItmDsbl"}if(o.getStartsSection()){p+=" sapUiMnuItmSepBefore"}n.writeAttribute("class",p);if(o.getTooltip_AsString()){n.writeAttributeEscaped("title",o.getTooltip_AsString())}n.writeElementData(o);if(l.bAccessible){n.writeAccessibilityState(o,{role:"menuitem",disabled:!m.checkEnabled(o),posinset:l.iItemNo,setsize:l.iTotalItems,labelledby:{value:this.getId()+"-txt "+this.getId()+"-scuttxt",append:true}});if(k){n.writeAttribute("aria-haspopup",true);n.writeAttribute("aria-owns",k.getId())}}n.write('><div class="sapUiMnuItmL"></div>');n.write('<div class="sapUiMnuItmIco">');if(o.getIcon()){n.writeIcon(o.getIcon(),null,{title:null})}n.write("</div>");n.write('<div id="'+this.getId()+'-txt" class="sapUiMnuItmTxt">');n.write(o.custom_html);n.write("</div>");n.write('<div id="'+this.getId()+'-scuttxt" class="sapUiMnuItmSCut"></div>');n.write('<div class="sapUiMnuItmSbMnu">');if(k){n.write('<div class="sapUiIconMirrorInRTL"></div>')}n.write("</div>");n.write('<div class="sapUiMnuItmR"></div>');n.write("</li>")}a.sap.ui.define(["sap/ui/unified/Menu","sap/ui/unified/MenuItem","sap/ui/unified/MenuItemBase"],function(l,m,k){j.add=function(o,n,t){if(o=="separator"){this.separ=true;return}if(o.indexOf("header:")==0){return this.items.push(new m("",{text:o.substr(7),enabled:false}))}if(o=="endsub:"){var s=this.stack.pop();s._item.setSubmenu(new l("",{items:this.items}));this.items=s._items;return}var p=false,r=null;if(o.indexOf("sub:")==0){o=o.substr(4);p=true}if(typeof n=="function"){t=n;n=o}if(o.indexOf("chk:")==0){o=o.substr(4);r=true}else{if(o.indexOf("unk:")==0){o=o.substr(4);r=false}}var q=new m("",{});if(!p&&(o.indexOf("<svg")==0)){q.custom_html=o;q.render=g}else{q.setText(o);if(this.separ){q.setStartsSection(true)}this.separ=false}if(r){q.setIcon("sap-icon://accept")}this.items.push(q);if(p){this.stack.push({_items:this.items,_item:q});this.items=[]}if(typeof t=="function"){q.menu_func=t;q.menu_arg=n}this.cnt++};j.addchk=function(o,p,n,q){return this.add((o?"chk:":"unk:")+p,n,q)};j.size=function(){return this.cnt-1};j.addDrawMenu=function(u,r,s){if(!r){r=[]}if(r.length==0){r.push("")}var n=false;if(u.indexOf("nosub:")==0){n=true;u=u.substr(6)}if(r.length===1){if(r[0]==="inspect"){u=u.replace("Draw","Inspect")}return this.add(u,r[0],s)}if(!n){this.add("sub:"+u,r[0],s)}for(var q=0;q<r.length;++q){var p=r[q];if(p==""){p="&lt;dflt&gt;"}var t=q+1;if((r.length>5)&&(p.length>0)){while((t<r.length)&&(r[t].indexOf(p)==0)){t++}}if(n){p=u+" "+p}if(t<q+2){this.add(p,r[q],s)}else{this.add("sub:"+p,r[q],s);for(var o=q+1;o<t;++o){this.add(r[o],r[o],s)}this.add("endsub:");q=t-1}}if(!n){this.add("endsub:")}};j.remove=function(){if(this.remove_bind){document.body.removeEventListener("click",this.remove_bind);this.remove_bind=null}if(this.element){this.element.destroy();if(this.close_callback){this.close_callback()}}this.element=null};j.remove_bind=j.remove.bind(j);j.show=function(p,q){this.remove();if(typeof q=="function"){this.close_callback=q}var n=sap.ui.getCore().byId("root_context_menu");if(n){n.destroy()}document.body.addEventListener("click",this.remove_bind);this.element=new l("root_context_menu",{items:this.items});this.element.attachItemSelect(null,this.menu_item_select,this);var o=sap.ui.core.Popup.Dock;this.element.open(false,null,o.BeginTop,o.BeginTop,null,p.clientX+" "+p.clientY)};j.menu_item_select=function(n){var o=n.getParameter("item");if(!o||!o.menu_func){return}if(this.painter){o.menu_func.bind(this.painter)(o.menu_arg)}else{o.menu_func(o.menu_arg)}};a.CallBack(i,j)});return j};a.TObjectPainter.prototype.ShowInpsector=function(){var h={};h.closeObjectInspector=function(){this.dialog.close();this.dialog.destroy()};h.dialog=a.sap.ui.xmlfragment("sap.ui.jsroot.view.Inspector",h);var g=sap.ui.getCore().byId("object_inspector");g.getController().setObject(this.GetObject());h.dialog.open()};a.TCanvasPainter.prototype.ActivateGed=function(h){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().showGeEditor(true)}this.SelectObjectPainter(h)};a.TCanvasPainter.prototype.ActivateFitPanel=function(h){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().showLeftArea("FitPanel")}};a.TCanvasPainter.prototype.SelectObjectPainter=function(h){var g=a.sap.ui.getCore().byId("TopCanvasId");var i=g?g.getController().getLeftController("Ged"):null;if(i){i.onObjectSelect(this,h)}};a.TCanvasPainter.prototype.HasEventStatus=function(){var g=a.sap.ui.getCore().byId("TopCanvasId");return g?g.getController().isStatusShown():false};a.TCanvasPainter.prototype.ToggleEventStatus=function(){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().toggleShowStatus()}};a.TCanvasPainter.prototype.ShowStatus=function(h,k,j,i){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().ShowCanvasStatus(h,k,j,i)}};a.TCanvasPainter.prototype.ShowUI5ProjectionArea=function(h,i){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().showProjectionArea(h,i)}};a.TCanvasPainter.prototype.DrawInUI5ProjectionArea=function(j,h,i){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().drawInProjectionArea(j,h,i)}};a.TCanvasPainter.prototype.ShowMessage=function(h){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().showMessage(h)}};a.TCanvasPainter.prototype.ShowSection=function(i,h){var g=a.sap.ui.getCore().byId("TopCanvasId");if(g){g.getController().showSection(i,h)}};a.TCanvasPainter.prototype.MethodsDialog=function(i,k,h){var g=a.sap.ui.getCore().byId("TopCanvasId");if(!g){return}var j=this;k.fClassName=i.GetClassName();if((h.indexOf("#x")>0)||(h.indexOf("#y")>0)||(h.indexOf("#z")>0)){k.fClassName="TAxis"}g.getController().showMethodsDialog(k,function(m){if(i.ExecuteMenuCommand(k,m)){return}var l=k.fExec;if(m){l=l.substr(0,l.length-1)+m+")"}console.log("execute method for object "+h+" exec= "+l);j.SendWebsocket("OBJEXEC:"+h+":"+l)})};return a}));